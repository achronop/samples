<audio id="audio" src="a2002011001-e02-16kHz.wav" controls></audio>
<p/>
<button id="b1" type"button">Set Sink 1</button>
<button id="b2" type"button">Set Sink 2</button>
<button id="b2b" type"button">Set Sink 3</button>
<button id="b3" type"button">Set Unknown Sink</button>
</p>
<audio id="audio1" src="a2002011001-e02-16kHz.wav" controls></audio>
<p/>
<button id="b4" type"button">Set Sink 1</button>
<button id="b5" type"button">Set Sink 2</button>
<button id="b5b" type"button">Set Sink 3</button>
<button id="b6" type"button">Set Unknown Sink</button>

<div id="div"/>
<script>
var log = msg => div.innerHTML += msg + "<br>";
audio.volume = 0.1;
audio1.volume = 0.3;
//let devices;
//const audio = document.createElement('audio');
//audio.src = "a2002011001-e02-16kHz.wav"
let audioDevices = [];
navigator.mediaDevices.enumerateDevices()
.then((devices) => {
  audioDevices = devices.filter(device => device.kind === 'audiooutput');
  log("Found " + audioDevices.length + " output devices");
});

b1.onclick = () => 
{
  audio.setSinkId(audioDevices[0].deviceId)
	.then( () => {
	  log("Sink 1: Audio is being played from sink 1: " + audio.sinkId);
	})
	.catch( (error) => {
	  log("Sink 1: promise rejected: " + error);
  });
}

b2.onclick = () =>
{
  audio.setSinkId(audioDevices[1].deviceId)
	.then( () => {
	  log("Sink 2: Audio is being played from sink 2: " + audio.sinkId);
	})
	.catch( (error) => {
	  log("Sink 2: promise rejected: " + error);
	});
}

b2b.onclick = () =>
{
  audio.setSinkId(audioDevices[2].deviceId)
	.then( () => {
	  log("Sink 3: Audio is being played from sink 3: " + audio.sinkId);
	})
	.catch( (error) => {
	  log("Sink 3: promise rejected: " + error);
	});
}

b3.onclick = () =>
{
  audio.setSinkId("alex")
	.then( () => {
	  log("Never get here!!! " + audio.sinkId);
	})
	.catch( (error) => {
	  log("Unknown Sink: Audio promise rejected: " + error);
	});
}

b4.onclick = () => 
{
  audio1.setSinkId(audioDevices[0].deviceId)
	.then( () => {
	  log("Sink 1: Audio1 is being played from: " + audio1.sinkId);
	})
	.catch( (error) => {
	  log("Sink 1: Audio1 promise rejected: " + error);
  });
}

b5.onclick = () =>
{
  audio1.setSinkId(audioDevices[1].deviceId)
	.then( () => {
	  log("Sink 2: Audio1 is being played from: " + audio1.sinkId);
	})
	.catch( (error) => {
	  log("Sink 2: Audio1 promise rejected: " + error);
	});
}

b5b.onclick = () =>
{
  audio1.setSinkId(audioDevices[2].deviceId)
	.then( () => {
	  log("Sink 3: Audio1 is being played from: " + audio1.sinkId);
	})
	.catch( (error) => {
	  log("Sink 3: Audio1 promise rejected: " + error);
	});
}

b6.onclick = () =>
{
  audio1.setSinkId("alex")
	.then( () => {
	  log("Never get here!!! " + audio1.sinkId);
	})
	.catch( (error) => {
	  log("Unknown Sink: Audio1 promise rejected: " + error);
	});
}

</script>
